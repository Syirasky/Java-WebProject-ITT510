<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

  <br></br>
   
 <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>PrimeFaces</title>
            </f:facet>
             <style type="text/css"> 
                 body {background-color: #9966ff;} 
                h1 {background-color: #00ff00;} 
                h2 {background-color: grey;} 
                p {background-color: rgb(250,0,255);} 
            </style> 
        </h:head>

        <h:body>

            <p:layout fullPage="true">

                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                    Header
                </p:layoutUnit>

                <p:layoutUnit position="south" size="40" closable="true" collapsible="true">
                    Footer
                </p:layoutUnit>

                <p:layoutUnit position="west" size="15%" header="Left" collapsible="true">
                    <p:menu>
                        <p:submenu label="Menu">
                            <p:menuitem value="List Books" url="http://localhost:8080/BookStorePelikSangat/faces/admin/List.xhtml" />
                            <p:menuitem value="Add Books" url="http://localhost:8080/BookStorePelikSangat/faces/admin/AddStock.xhtml" />
                            <p:menuitem value="Generate Report" url="http://localhost:8080/BookStorePelikSangat/faces/admin/CreateReport.xhtml" />
                        </p:submenu>

                    </p:menu>
                </p:layoutUnit>

                <p:layoutUnit position="center">Hello , #{storeController.getUserSession()}.
                    <div align="center"> <u>  Generate Payment Report To XML </u>
                    <h:form>
                      <br></br>
                        <h4>1. Generate Report</h4> <br></br>
                        <p:commandButton value="Generate Report To XML" action="#{storeController.CreateReport()}"></p:commandButton>
                       
                      
                        
                        
                  
                        
                        <h4>2. Download Report</h4> <br></br>
                               <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">
                                    <p:graphicImage name="/demo/images/ajaxloadingbar.gif" />
                                </p:dialog>

                
                        <p:commandButton value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start,stop);" icon="ui-icon-arrowthick-1-s">
                            <p:fileDownload value="#{fileDownloadView.file}" />
                        </p:commandButton>
                    </h:form>
                    </div>
                            <script type="text/javascript">
                            function start() {
                                PF('statusDialog').show();
                            }

                            function stop() {
                                PF('statusDialog').hide();
                            }

                                    function start() {
                                    PF('startButton1').disable();

                                    window['progress'] = setInterval(function() {
                                        var pbClient = PF('pbClient'),
                                        oldValue = pbClient.getValue(),
                                        newValue = oldValue + 10;

                                        pbClient.setValue(pbClient.getValue() + 10);

                                        if(newValue === 100) {
                                            clearInterval(window['progress']);
                                        }


                                    }, 1000);
                                }

                                function cancel() {
                                    clearInterval(window['progress']);
                                    PF('pbClient').setValue(0);
                                    PF('startButton1').enable();
                                }
                                </script>
                    
                </p:layoutUnit>

            </p:layout>

        </h:body>

    </f:view>
</html>

